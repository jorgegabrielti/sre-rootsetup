#!/bin/bash 
#
# ##########################################################################
# +----------------------------------------------------------------------+ #
# |                 Backup Shell                                         | #
# +----------------------------------------------------------------------+ #
# |                                                                      | #
# | Name          : main.sh                                              | #
# | Function      : startup sre tools install                            | #
# | Version       : 1.0                                                  | #
# | Author        : Jorge Gabriel (SRE)                                  | #
# | Email         : jorgegabriel.ti@gmail.com                            | #
# +----------------------------------------------------------------------+ #
# ##########################################################################
#
# Description:
#
# Algortimo do script :
#  Install SRE tools for start work.
# --------------------------------------------------------------------------## Alias eXpands
shopt -s expand_aliases

### Workdir
WORK_DIR="${PWD}"

### Import functions
for FUNCTION in $(grep -F 'Test: [OK]' -l -r ${WORK_DIR}/src/function/); do
  sed -i 's/\r$//' ${FUNCTION}
  source ${FUNCTION}
done

### System configurations
time distro_detect && \
  update_system

### Packages installations
time packages_install

### Python install
time python_install

## TODO: user firebug para sites cujo o download 
## de artefatos não seja tão simples. Usar curl em seguida.
#

#### Containers tools
## Docker
time docker_install

## Kubernetes
## kind
time kind_install

## Kubectl
time kubectl_install

## istio
time istio_install

#### IaC Tools
## Ansible
time ansible_install

## Vagrant
time vagrant_install 

## Terraform
time terraform_install 

#### Cloud Tools 
## aws-cli
time awscli_install

## gcloud
gcloud_install

#echo "deb [signed-by=/usr/share/keyrings/cloud.google.gpg] https://packages.cloud.google.com/apt cloud-sdk main" \
#  | sudo tee -a /etc/apt/sources.list.d/google-cloud-sdk.list
#sudo apt-get install apt-transport-https ca-certificates gnupg
#curl https://packages.cloud.google.com/apt/doc/apt-key.gpg \
#  | sudo apt-key \
#    --keyring /usr/share/keyrings/cloud.google.gpg add -
#sudo apt-get update && sudo apt-get install google-cloud-sdk